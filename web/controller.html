<script
  type="text/javascript"
  src="https://www.airconsole.com/api/airconsole-1.8.0.js"
></script>

<link rel="stylesheet" href="/css/css.css" />
<link rel="stylesheet" href="/css/controller.css" />

<body>
  <div id="player_id">No player</div>
  <button id="btn-msg">Send Message</button>

  <button id="action-1">Action 1</button>
  <button id="action-2">Action 2</button>
</body>

<script type="text/javascript">
  // Custom data on device: enoughPlayers

  let airconsole = new AirConsole({
    orientation: "landscape",
  }); // Can adjust options here

  // Validate if the controller is active (not just connected). A controller is not active when the screen has limited the number of players.
  airconsole.onActivePlayersChange = function(playerId) {
    console.log(playerId);
    var div = document.getElementById("player_id");
    if (playerId !== undefined) {
      // If player is set, then this controller is active
      div.innerHTML =  "Player " + (playerId + 1);
    } else {
      // If player is not set, then this controller is not active
      div.innerHTML = "Too many players!";
    }
  };

  // When we press our button, we send a message to the screen
  document.getElementById("btn-msg").addEventListener("click", function () {
    message = {
      type: "text",
      content: "Message from the controller",
    };
    airconsole.message(AirConsole.SCREEN, message);
  });

  document.getElementById("action-1").addEventListener("click", function () {
    message = {
      type: "action",
      action: "action-1",
    };
    airconsole.message(AirConsole.SCREEN, message);
  });

  document.getElementById("action-2").addEventListener("click", function () {
    message = {
      type: "action",
      action: "action-2",
    };
    airconsole.message(AirConsole.SCREEN, message);
  });

  // Listen for messages
  airconsole.onMessage = function (from, data) {
    // Show message on device screen
    var info = document.createElement("DIV");
    info.innerHTML = data;
    document.body.appendChild(info);
  };
</script>
